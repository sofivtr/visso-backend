spring.application.name=visso-backend

server.port=8081

spring.datasource.url=jdbc:mysql://localhost:3306/visso_db?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Crea / actualiza TABLAS automáticamente según tus entidades @Entity
# update: solo actualiza sin borrar datos
# create-drop: BORRA y RECREA todo cada vez que se inicia la aplicación
spring.jpa.hibernate.ddl-auto=update

# Muestra en consola los SQL que ejecuta Spring (útil para debug)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Dialecto MySQL para que Hibernate genere SQL compatible
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# Importante: asegura que data.sql se ejecute DESPUÉS de crear tablas
# Cambiar a "never" después de la primera ejecución para evitar duplicados
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true


# ===============================
# H2 desactivado (por si acaso)
# ===============================
spring.h2.console.enabled=false

# ===============================
# Configuración de subida de archivos
# ===============================
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
spring.servlet.multipart.enabled=true

# ===============================
# JWT
# ===============================
jwt.secret=ZGV2LXNlY3JldC1wbGVhc2UtY2hhbmdlLXRvLWEtbG9uZy1iYXNlNjQtSFMtMzIta2V5LSE=
jwt.expiration=86400000

# Directorio para imágenes subidas por usuarios (producción)
# En desarrollo: se detecta automáticamente y usa target/classes/static/images
# En producción: especifica ruta absoluta, ej: /var/www/visso/images o C:/visso/images
app.upload.dir=${UPLOAD_DIR:}
